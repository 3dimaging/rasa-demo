name: Continuous Integration
on:
  push:
    branches:
    - master
    paths:
    - 'actions/**'

jobs:
  docker:
    name: Build Action Server Docker Image
    runs-on: ubuntu-latest
    steps:
      - name: Checkout git repository üïù
        uses: actions/checkout@v2
      - name: Build Actions Server Image
        uses: RasaHQ/rasa-action-server-gha@master
        with:
          actions_directory: 'actions'
          requirements_file: 'actions/requirements-actions.txt'
          docker_registry: 'gcr.io'
          docker_registry_login: '_token'
          docker_registry_password: ${{ secrets.GCLOUD_AUTH }}
          docker_image_name: 'replicated-test/rasa-demo'
          docker_image_tag: 'latest'
          rasa_sdk_version: '2.1.2'
